{"ast":null,"code":"import _regeneratorRuntime from\"/Users/thetrung/Downloads/wtg-backendv2-master@42dd489862c/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/thetrung/Downloads/wtg-backendv2-master@42dd489862c/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/thetrung/Downloads/wtg-backendv2-master@42dd489862c/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/thetrung/Downloads/wtg-backendv2-master@42dd489862c/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Route,BrowserRouter,Switch,Redirect}from'react-router-dom';import ApolloClient from'apollo-boost';import{ApolloProvider}from'@apollo/react-hooks';import cogoToast from'cogo-toast';import Login from'./pages/login/login';import TreeDashboard from'./pages/tree-dashboard/treeDashboard';import TreeEditor from'./pages/tree-editor/treeEditor';import AuthenticationContext,{AuthenticationProvider}from'./services/authenticationContextProvider';import'./app.scss';var client=new ApolloClient({uri:'http://localhost:4000/graphql'});function App(){var _useState=useState(AuthenticationContext),_useState2=_slicedToArray(_useState,2),authenticationData=_useState2[0],setAuthenticationData=_useState2[1];useEffect(function(){},[authenticationData]);function clearAuthenticationData(){setAuthenticationData(_objectSpread({},authenticationData,{isLoggedIn:false}));}function updateAuthenticationData(_x){return _updateAuthenticationData.apply(this,arguments);}function _updateAuthenticationData(){_updateAuthenticationData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cogoToast.loading('Loading Authentication Info',{hideAfter:2});return _context.abrupt(\"return\",new Promise(function(resolve,reject){setTimeout(function(){try{setAuthenticationData(user);resolve();}catch(err){reject(err);}},2000);}));case 2:case\"end\":return _context.stop();}}},_callee);}));return _updateAuthenticationData.apply(this,arguments);}return/*#__PURE__*/React.createElement(ApolloProvider,{client:client},/*#__PURE__*/React.createElement(BrowserRouter,null,/*#__PURE__*/React.createElement(AuthenticationProvider,{value:{authenticationData:authenticationData,clearAuthenticationData:clearAuthenticationData,updateAuthenticationData:updateAuthenticationData}},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(Route,{path:\"/dashboard\"},/*#__PURE__*/React.createElement(TreeDashboard,{treeStatus:\"published\"})),/*#__PURE__*/React.createElement(Route,{path:\"/drafts\"},/*#__PURE__*/React.createElement(TreeDashboard,{treeStatus:\"draft\"})),/*#__PURE__*/React.createElement(Route,{path:'/tree/',component:TreeEditor}),/*#__PURE__*/React.createElement(Redirect,{path:\"/\",to:\"login\"})))));}export default App;","map":{"version":3,"sources":["/Users/thetrung/Downloads/wtg-backendv2-master@42dd489862c/client/src/app.js"],"names":["React","useState","useEffect","Route","BrowserRouter","Switch","Redirect","ApolloClient","ApolloProvider","cogoToast","Login","TreeDashboard","TreeEditor","AuthenticationContext","AuthenticationProvider","client","uri","App","authenticationData","setAuthenticationData","clearAuthenticationData","isLoggedIn","updateAuthenticationData","user","loading","hideAfter","Promise","resolve","reject","setTimeout","err"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,KAAT,CAAgBC,aAAhB,CAA+BC,MAA/B,CAAuCC,QAAvC,KAAuD,kBAAvD,CACA,MAAOC,CAAAA,YAAP,KAAyB,cAAzB,CACA,OAASC,cAAT,KAA+B,qBAA/B,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,sCAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAOC,CAAAA,qBAAP,EAAgCC,sBAAhC,KAA8D,0CAA9D,CAEA,MAAO,YAAP,CAEA,GAAMC,CAAAA,MAAM,CAAG,GAAIR,CAAAA,YAAJ,CAAiB,CAC5BS,GAAG,CAAE,+BADuB,CAAjB,CAAf,CAIA,QAASC,CAAAA,GAAT,EAAe,eACyChB,QAAQ,CAACY,qBAAD,CADjD,wCACJK,kBADI,eACgBC,qBADhB,eAGXjB,SAAS,CAAC,UAAM,CAAE,CAAT,CAAW,CAACgB,kBAAD,CAAX,CAAT,CAEA,QAASE,CAAAA,uBAAT,EAAmC,CAC/BD,qBAAqB,kBAAMD,kBAAN,EAA0BG,UAAU,CAAE,KAAtC,GAArB,CACH,CAPU,QASIC,CAAAA,wBATJ,oLASX,iBAAwCC,IAAxC,kHACId,SAAS,CAACe,OAAV,CAAkB,6BAAlB,CAAiD,CAC7CC,SAAS,CAAE,CADkC,CAAjD,EADJ,gCAIW,GAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACpCC,UAAU,CAAC,UAAM,CACb,GAAI,CACAV,qBAAqB,CAACI,IAAD,CAArB,CACAI,OAAO,GACV,CAAC,MAAOG,GAAP,CAAY,CACVF,MAAM,CAACE,GAAD,CAAN,CACH,CACJ,CAPS,CAOP,IAPO,CAAV,CAQH,CATM,CAJX,wDATW,2DAyBX,mBACI,oBAAC,cAAD,EAAgB,MAAM,CAAEf,MAAxB,eACI,oBAAC,aAAD,mBACI,oBAAC,sBAAD,EACI,KAAK,CAAE,CAAEG,kBAAkB,CAAlBA,kBAAF,CAAsBE,uBAAuB,CAAvBA,uBAAtB,CAA+CE,wBAAwB,CAAxBA,wBAA/C,CADX,eAGI,oBAAC,MAAD,mBACI,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEZ,KAAhC,EADJ,cAEI,oBAAC,KAAD,EAAO,IAAI,CAAC,YAAZ,eACI,oBAAC,aAAD,EAAe,UAAU,CAAC,WAA1B,EADJ,CAFJ,cAKI,oBAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,eACI,oBAAC,aAAD,EAAe,UAAU,CAAC,OAA1B,EADJ,CALJ,cAQI,oBAAC,KAAD,EAAO,IAAI,CAAE,QAAb,CAAuB,SAAS,CAAEE,UAAlC,EARJ,cASI,oBAAC,QAAD,EAAU,IAAI,CAAC,GAAf,CAAmB,EAAE,CAAC,OAAtB,EATJ,CAHJ,CADJ,CADJ,CADJ,CAqBH,CAED,cAAeK,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Route, BrowserRouter, Switch, Redirect } from 'react-router-dom';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport cogoToast from 'cogo-toast';\nimport Login from './pages/login/login';\nimport TreeDashboard from './pages/tree-dashboard/treeDashboard';\nimport TreeEditor from './pages/tree-editor/treeEditor';\nimport AuthenticationContext, { AuthenticationProvider } from './services/authenticationContextProvider';\n\nimport './app.scss';\n\nconst client = new ApolloClient({\n    uri: 'http://localhost:4000/graphql',\n});\n\nfunction App() {\n    const [authenticationData, setAuthenticationData] = useState(AuthenticationContext);\n\n    useEffect(() => {}, [authenticationData]);\n\n    function clearAuthenticationData() {\n        setAuthenticationData({ ...authenticationData, isLoggedIn: false });\n    }\n\n    async function updateAuthenticationData(user) {\n        cogoToast.loading('Loading Authentication Info', {\n            hideAfter: 2,\n        });\n        return new Promise((resolve, reject) => {\n            setTimeout(() => {\n                try {\n                    setAuthenticationData(user);\n                    resolve();\n                } catch (err) {\n                    reject(err);\n                }\n            }, 2000);\n        });\n    }\n\n    return (\n        <ApolloProvider client={client}>\n            <BrowserRouter>\n                <AuthenticationProvider\n                    value={{ authenticationData, clearAuthenticationData, updateAuthenticationData }}\n                >\n                    <Switch>\n                        <Route path='/login' component={Login} />\n                        <Route path='/dashboard'>\n                            <TreeDashboard treeStatus='published' />\n                        </Route>\n                        <Route path='/drafts'>\n                            <TreeDashboard treeStatus='draft' />\n                        </Route>\n                        <Route path={'/tree/'} component={TreeEditor} />\n                        <Redirect path='/' to='login' />\n                    </Switch>\n                </AuthenticationProvider>\n            </BrowserRouter>\n        </ApolloProvider>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}